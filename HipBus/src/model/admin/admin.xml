<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="Admin">
	<!-- 관리자 현황 -->
  	<select id="memberGrade" resultType="int">
  		select count( * ) from hb_member
  	</select>
  	<select id="adminGrade" resultType="int">
  		select count( * ) from hb_member where mem_level=3
  	</select>
  	
  	<select id="numberOfCrew" resultType="int">
  		select count( * ) from hb_crew
  	</select>
  	<select id="numberOfPost" resultType="int">
  		select count( * ) from hb_station
  	</select>
  	
  	<!-- 멤버목록부르기 -->
	<select id="getMemberLists" resultType="model.MemberDto" parameterType="Map">
		select email, nick, mem_level, crewid, r from 
		(select email, nick, mem_level, crewid, rownum r from
		(select m.email, nick,mem_level,crewid from hb_member m, hb_crewmember c where m.email=c.email(+) order by mem_level asc) 
		where mem_level=1 or mem_level=2 order by email asc) where r &gt;= #{pageStart} and r &lt;= #{pageEnd}

	</select>
	
	<!-- 검색 -->
	<select id="getSearch" resultType="model.MemberDto" parameterType="Map">
		select * from hb_member where ${category} like '${keyword}%' 
	</select>
	
	<select id="searchNum" resultType="int" parameterType="Map">
		select count(*) from hb_member where ${category} like '${keyword}%'
	</select>
	
	<!-- 수정 -->
	<update id="modifyGrade" parameterType="model.MemberDto">
		update hb_member set mem_level=#{mem_level} where email=#{email}
	</update>
	
	<!-- 삭제 -->
	<delete id="deleteMember" parameterType="String">
		delete from hb_member where email=#{email}
	</delete>
	
	
	
</mapper>