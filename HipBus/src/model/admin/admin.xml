<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="Admin">
	<!-- 관리자 현황 -->
  	<select id="memberGrade" resultType="int">
  		select count( * ) from hb_member
  	</select>
  	<select id="adminGrade" resultType="int">
  		select count( * ) from hb_member where mem_level=3
  	</select>
  	
  	<select id="numberOfCrew" resultType="int">
  		select count( * ) from hb_crew
  	</select>
  	<select id="numberOfPost" resultType="int">
  		select count( * ) from hb_station
  	</select>
  	
  	<!-- 멤버목록부르기 -->
	<select id="getMemberLists" resultType="model.MemberDto" parameterType="Map">
		select email, nick, passwd, mem_level, r from 
		(select email, nick, passwd, mem_level, imgname, imglocation, rownum r from
		(select * from hb_member  order by mem_level asc) 
		where mem_level=1 or mem_level=2 order by email asc) where r &gt;=${pageStart} and r &lt;=${pageEnd}
	</select>
	
	<!-- 검색 -->
	<select id="getSearch" resultType="model.MemberDto" parameterType="Map">
		select * from hb_member where #{category} like #{keyword}%
	</select>
	
	<select id="searchNum" resultType="int" parameterType="Map">
		select count(*) from hb_member where #{category} like #{keyword}%
	</select>
	
	<!-- 삭제 -->
	<delete id="deleteMember" parameterType="String">
		delete from hb_member where email=#{email}
	</delete>
	
</mapper>