<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="General">
	<select id="getMember" parameterType="String" resultType="model.MemberDto">
		select
		* from HB_Member where email=#{email}
	</select>
	
	<select id="getCrew" parameterType="String" resultType="model.CrewDto">
		select *
		from hb_crew where crewid=#{crewid}
	</select>

	<select id="verifyEmail" parameterType="String" resultType="Integer">
		select count(*) from HB_Member where email = #{email}	
	</select>

	<select id="verifyNick" parameterType="String" resultType="Integer">
		select count(*) from HB_Member where nick = #{nick}
	</select>
	
	<select id="checkEmailPasswd" parameterType="hashmap" resultType="Integer">
		select count(*) from HB_Member where email=#{email} and passwd = #{passwd}
	</select>
	
	<select id="getMyCrews" parameterType="String" resultType="model.CrewDto">
		select distinct c.crewid, c.crewname 
		from HB_Crew c, HB_CrewMember m 
		where c.crewid=m.crewid
		and m.email=#{email}
	</select>
	<!-- ^ email을 주면 해당 email이 속해있는 크루 리스트를 돌려줌 -->
	
	<select id="getChannels" resultType="model.ChannelDto">
		select * from HB_Channel
	</select>
	
	<select id="getVerificationCode" parameterType="String" resultType="int">
		select code from HB_Verification where email=#{email} 
	</select>
</mapper>